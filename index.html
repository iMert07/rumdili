<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yapay Dil Sözlüğü</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Yapay Dil Sözlüğü</h1>
        <input type="text" id="searchInput" placeholder="Kelime ara...">
        <div id="result"></div>
    </div>

    <script>
      async function fetchWords() {
        const sheetId = '1R01aIajx6dzHlO-KBiUXUmld2AEvxjCQkUTFGYB3EDM';
        const sheetName = 'Sayfa1';
        const url = `https://opensheet.elk.sh/${sheetId}/${sheetName}`;

        try {
          const response = await fetch(url);
          const data = await response.json();

          const searchInput = document.getElementById('searchInput');
          const resultDiv = document.getElementById('result');

          // Her harf girişiyle anında arama
          searchInput.addEventListener('input', () => {
            const query = searchInput.value.trim().toLowerCase();
            if (!query) {
              resultDiv.innerHTML = '';
              return;
            }

            // Kısmi eşleşme yapan kelimeleri buluyoruz
            const matches = data.filter(row => {
              const wordMatch = row.Sözcük?.toLowerCase().includes(query); // Sözcükte kısmi eşleşme
              const synonymsMatch = row['Eş Anlamlılar']?.toLowerCase().split(',').map(x => x.trim()).some(syn => syn.includes(query)); // Eş anlamlılarda kısmi eşleşme
              return wordMatch || synonymsMatch;
            });

            // Eşleşen kelimeler alfabetik sıraya göre sıralanır
            matches.sort((a, b) => a.Sözcük.localeCompare(b.Sözcük));

            // En yakın eşleşme: İlk sıradaki öğeyi gösteriyoruz
            if (matches.length > 0) {
              const bestMatch = matches[0]; // İlk eşleşmeyi alıyoruz
              resultDiv.innerHTML = `
                <div>
                  <strong>${bestMatch.Sözcük}</strong><br>
                  <span style="color: gray;">(${bestMatch['Eş Anlamlılar']})</span><br>
                  <p>${bestMatch.Açıklama || ''}</p>
                </div>
              `;
            } else {
              resultDiv.innerHTML = `<p>Kelime bulunamadı.</p>`;
            }
          });
        } catch (error) {
          console.error('Veri çekme hatası:', error);
        }
      }

      window.onload = fetchWords;
    </script>
</body>
</html>
